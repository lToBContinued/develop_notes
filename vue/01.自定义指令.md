# 自定义指令：

## 基本语法

全局注册（全局注册写在main.js中） 语法：

```vue
// v-指令名 就是自定义的指令
<input v-指令名 type="text" />
```

```js
Vue.directive('指令名', {
  // inserted 指的是当指令所绑定的元素被添加到页面当中时，自动调用
  inserted(el) {
    // el 就是自定义的指令所绑定的元素
    // 例:  可以对 el 标签，扩展额外功能（自动获得焦点）
    el.focus()
  },
})
```

特点：在全局注册指令后，可以在其他模块中反复使用多次

局部注册 语法：

```vue
<input v-指令名 type="text" />
```

特点：局部注册的指令只能在当前组件范围内使用

注：作用和 ↓ 一样，但是这种方法比较麻烦

```vue
// ref="inp" mounted () { this.$refs.inp.focus() }
```

## 指令的值

1. v-指令名 = "指令值"，通过等号可以绑定指令的值
2. 通过 binding.value 可以拿到指令的值
3. 通过 update 钩子，可以监听指令值的变化，进行 dom 更新操作

```vue
<h1 v-指令名="指令值1">指令的值1测试</h1>
<h1 v-指令名="指令值2">指令的值2测试</h1>

<script>
export default {
  data() { 
    return { 
      指令值1: '值',
      指令值2: '值',
    }
  },
  directives: { 
    指令名: {
      // 1.inserted 提供的事元素被添加到页面中时的逻辑 
      inserted(el, binding) { 
        console.log(el, binding.value)
        // binding.value就是指令的值 
        // 例：更改文字颜色
        el.style.color = binding.value
      },
      // 2.update 指令的值修改的时候，提供值变化后，dom更新的逻辑
      update(el, binding) {
        console.log('指令的值修改了')
        el.style.color = binding.value
      }
    }
  }
}
</script>
```
