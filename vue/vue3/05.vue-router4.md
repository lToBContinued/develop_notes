# vue-router4 路由代码解析

## 路由初始化

1. 创建路由实例由 createRouter 实现
2. 路由模式
   2.1 history 模式使用 `createWebHistory( )`
   2.2 hash 模式使用 `createWebHashHistory( )`
   2.3 参数是`基础路径`，默认/

```js
import { createRouter, createWebHistory } from 'vue-router'
// 初始化 vue-router4.x(Vue3)
const router = createRouter({
  // vite 中的环境变量 import.meta.env.BASE_URL 就是 vite.config.js 中的 base 配置项
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [],
})

export default router
```

## 获取路由对象和参数

1. 获取路由对象 router → useRouter
   `const router = useRouter( )`
2. 获取路由参数route → useRoute
   `const route = useRoute( )`

```vue
<script setup>
// 在vue3 compositionAPI中
// 1. 获取路由对象 router useRouter
//    const router = useRouter()
// 2. 获取路由参数router useRoute
//    const route = useRoute()
import { useRoute, useRouter } from 'vue-router'

const router = useRouter()
const route = useRoute()

const goList = () => {
  console.log(router, route)
  router.push('/list')
}
</script>

<template>
  <div>
    <button @click="$router.push('/home')">跳首页</button>
    <button @click="goList">跳列表页</button>
  </div>
</template>
```
