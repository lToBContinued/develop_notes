# 控制器

nestjs 中的控制器相当于 express 中的路由，负责处理传入的请求并向客户端返回响应。

接下来我们会使用`@Controller()`装饰器，这是定义基本控制器所必需的。在`@Controller()`装饰器中使用路径前缀可以让我们轻松地对一组相关路由进行分组，并最大限度地减少重复代码。

我们可以将一组路由分组，它们的管理与路由`/user`下的狗实体交互。这样的话，就不必为文件中的每个路由重复该部分路径。

使用以下命令可以创建一整个有关 user 的处理模块：

```bash
nest g res demo
```

[![pVpthPP.png](https://s21.ax1x.com/2025/05/28/pVpthPP.png)](https://imgse.com/i/pVpthPP)

**user.controller.ts**：这是用户模块的控制器文件，处理与用户相关的 HTTP 请求。也就是相当于 express 的路由。

**user.controller.spec.ts**：这是 `UserController` 的单元测试文件，使用 NestJS 的测试工具对 `UserController` 进行测试，确保控制器实例能够正常创建。

**user.service.ts**：这是用户模块的服务文件，提供与用户相关的业务逻辑。在路由中可以引入 service 中的方法，对为路由添加所需的处理逻辑。

**user.service.spec.ts**：这是 `UserService` 的单元测试文件，使用 NestJS 的测试工具对 `UserService` 进行测试，确保服务实例能够正常创建。

**user.module.ts**：这是用户模块的模块文件，用于组织和管理用户模块的控制器和服务。

- `user/dto` 文件夹：该文件夹用于存放数据传输对象（DTO）的定义文件。
  - **user/dto/create-user.dto.ts**：定义了创建用户时的数据传输对象。
  - **user/dto/update-user.dto.ts**：定义了更新用户时的数据传输对象，继承自 `CreateUserDto`，并使用 `PartialType` 使所有字段变为可选。
- `user/entities` 文件夹：该文件夹用于存放实体类的定义文件。
  - **user/entities/user.entity.ts**：定义了用户实体类。

## Get 请求

在控制器中，使用 @Controller() 来确定访问路由的路径，

```typescript
import { Body, Controller, Get, Post, Req, Res, Session, Request, Query } from '@nestjs/common'
import { UserService } from './user.service'

@Controller({
  path: 'user',
})
export class UserController {
  constructor(private readonly userService: UserService) {}

  @Get()
  findAll(@Request() req) {
    console.log(req)
    return {
      code: 200,
      msg: req,
    }
  }
}
```